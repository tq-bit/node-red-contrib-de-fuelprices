<script type="text/javascript">

  RED.nodes.registerType('tankerkoenig-search', {
    category: 'tankerkoenig',
    name: 'tankerkoenig',
    color: '#7EC8E3',
    defaults: {
      config: { value: "", type: "tankerkoenig-config", required: true },
      lon: { value: 51.21 },
      lat: { value: 521.2 },
      radius: { value: 25 },
      fuelType: { value: "" },
      sort: { value: "" },
      name: { value: "" },
    },
    inputs: 1,
    outputs: 1,
    icon: 'font-awesome/fa-car',
    label: function () {
      return this.name || 'tankerkoenig-search';
    },

    oneditprepare: function () {
      $("#node-input-fuelType").typedInput({
        type: "fuelType", types: [{
          value: "fuelType",
          options: [
            { value: "e5", label: "E5 Gasoline" },
            { value: "e10", label: "E10 Gasoline" },
            { value: "diesel", label: "Diesel" },
            { value: "all", label: "All" },
          ]
        }]
      })

      $("#node-input-sort").typedInput({
        type: "sort", types: [{
          value: "sort",
          options: [
            { value: "price", label: "Price" },
            { value: "dist", label: "Distance" },
          ]
        }]
      })
    }
  });
</script>

<script type="text/html" data-template-name="tankerkoenig-search">
  <div class="form-row">
		<label for="node-input-config"><i class="fa fa-cogs"></i> Config </label>
		<input type="text" id="node-input-config" />
	</div>
  <div class="form-row">
		<label for="node-input-lon"><i class="fa fa-globe"></i> Longitude </label>
		<input type="number" min="-180" max="180" id="node-input-lon"  />
	</div>
  <div class="form-row">
		<label for="node-input-lat"><i class="fa fa-globe"></i> Latitude </label>
		<input type="number" min="-180" max="180" id="node-input-lat" />
	</div>
  <div class="form-row">
		<label for="node-input-radius"><i class="fa fa-map-marker"></i> Radius </label>
		<input type="number" min="0" max="25" id="node-input-radius" />
	</div>
  <div class="form-row">
		<label for="node-input-fuelType"><i class="fa fa-dashboard"></i> Fuel Type </label>
		<input type="text" id="node-input-fuelType" />
	</div>
  <div class="form-row">
		<label for="node-input-sort"><i class="fa fa-sort-amount-desc"></i> Sort by </label>
		<input type="text" id="node-input-sort" />
	</div>
  <div class="form-row">
		<label for="node-input-name"><i class="fa fa-tags"></i> Name </label>
		<input type="text" id="node-input-name" />
	</div>
  <div class="form-tips">
    <p>You can use the following message properties to set the longitude, latitude, radius and fuel type using 'change' or 'function' nodes: </p>
    <ul>
      <li><code>msg.lon</code></li>
      <li><code>msg.lat</code></li>
      <li><code>msg.radius</code></li>
      <li><code>msg.fuelType</code></li>
      <li><code>msg.sort</code></li>
    </ul>
    <hr/>
    <p>Data sourced by <a href="https://creativecommons.tankerkoenig.de/">Tankerkoenig</a> is licensed under the Creative Commons license</p>
    <a href="https://creativecommons.org/licenses/by/4.0/deed.de">License DE</a>
    <a href="https://creativecommons.org/licenses/by/4.0">License EN</a>
  </div>
</script>

<script type="text/html" data-help-name="tankerkoenig-search">

  <p>
    Node to request data from the tankerkoening API
  </p>

</script>